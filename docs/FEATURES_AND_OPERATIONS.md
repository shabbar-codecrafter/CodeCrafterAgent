# ðŸ¤– CodeCrafter Agent: Features & Operations Overview

## Executive Summary
CodeCrafter is an autonomous AI coding agent designed to securely handle user requests, generate code, and facilitate a localized human-in-the-loop approval workflow. It emphasizes security, accountability, and operational transparency.

---

## ðŸŒŸ Key Features

### 1. Dual-loop Approval Workflow
*   **User Plan Review**: The User approves the *Plan* before any code is written.
*   **Developer Code Review**: A designated Developer approves the *Code* (Diff) before the PR is created.
*   **Rejection Capability**: Developers can `REJECT` a request at the review stage, instantly halting the process.

### 2. Security Sentinel ðŸ›¡ï¸
*   **Pre-Processing**: All incoming requests pass through a Gemini Flash "Sentinel" model.
*   **Validation**: checks for:
    *   Malicious intent (Deleting repos, exfiltrating data).
    *   Scope violations (Touching unauthorized files).
*   **Outcome**: Blocks harmful requests *before* they reach the coding agent.

### 3. Accountability & Transparency ðŸ¤
*   **Immutable Logs**: A consolidated `dashboard_log.json` tracks every ticket state (`NEW` -> `COMPLETED`).
*   **PR Attribution**: Every Pull Request explicitly states **"Approved By: [Developer Email]"** in the body.
*   **Email Footers**: Clear branding ("Generated by CodeCrafter AI ðŸ¤– this bot is from osmos").

### 4. Interactive Email UI ðŸ“§
*   **Actionable Templates**: Emails contain clear instructions (e.g., `Reply "APPROVE / REJECT"`).
*   **Visual Status**: Color-coded banners (Blue=Info, Yellow=Waiting, Green=Success, Red=Blocked).

---

## âš™ï¸ Operational Workflow

1.  **Ingress**: Agent polls email (IMAP) for new requests.
2.  **Sentinel Check**: Request body is sanitized and checked for security.
3.  **Planning**: Agent reads the repo structure and proposes a plan. -> **User Approval**.
4.  **Execution**: Agent writes code and runs a QA check (Self-Correction).
5.  **Review**: Agent emails the Developer with the Plan, Diff, and QA Report. -> **Dev Approval**.
6.  **Completion**: On `APPROVE`, Agent pushes code and creates a GitHub PR.

---

## ðŸ“Š Dashboard & Monitoring
| Metric | Description |
| :--- | :--- |
| **Ticket Status** | Real-time tracking (`NEW`, `IN_PROGRESS`, `WAITING`, `COMPLETED`, `BLOCKED`). |
| **Time-to-PR** | Timestamp tracking for efficiency analysis. |
| **Block Rate** | Tracks rejected/blocked tickets for security auditing. |
